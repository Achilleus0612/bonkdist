import{P as Ci,a as ki,f as l,M as Ei,i as x,c as H,d as f,s as a,D as C,S as Ae,h as Di,j as Ce,L as Ri,x as ke,e as Ui,t as k,l as V,q as r,G as Fi}from"./index-a46dcd41.js";const zi=k('<img alt="Profile Avatar" class="avatar-preview" s:my-prefix-8a91617d-0>'),Ni=k('<button class="bevel-gold" s:my-prefix-8a91617d-0>CHANGE PASSWORD'),Oi=k('<div class="settings-container fadein" s:my-prefix-8a91617d-0><div class="profile-main-section" s:my-prefix-8a91617d-0><div class="avatar-section" s:my-prefix-8a91617d-0><div class="avatar-container" s:my-prefix-8a91617d-0></div><input type="file" accept="image/*" class="profile-input hidden" s:my-prefix-8a91617d-0><button class="upload-avatar-btn bevel-gold" s:my-prefix-8a91617d-0>UPLOAD AVATAR</button></div><div class="profile-fields-section" s:my-prefix-8a91617d-0><div class="section-header" s:my-prefix-8a91617d-0><p s:my-prefix-8a91617d-0>PROFILE SETTINGS</p></div><div class="field-container" s:my-prefix-8a91617d-0><div class="field-label" s:my-prefix-8a91617d-0>USERNAME</div><div class="username-input-container" s:my-prefix-8a91617d-0><input type="text" class="profile-input" s:my-prefix-8a91617d-0><button type="button" s:my-prefix-8a91617d-0></button></div></div><div class="field-container" s:my-prefix-8a91617d-0><div class="field-label" s:my-prefix-8a91617d-0>EMAIL</div><div class="input-container" s:my-prefix-8a91617d-0><input type="email" class="profile-input" s:my-prefix-8a91617d-0><button type="button" s:my-prefix-8a91617d-0></button></div></div><div class="field-container" s:my-prefix-8a91617d-0><div class="field-label" s:my-prefix-8a91617d-0>CLIENT SEED</div><input type="text" disabled class="profile-input" s:my-prefix-8a91617d-0></div><div class="field-container" s:my-prefix-8a91617d-0><div class="field-label" s:my-prefix-8a91617d-0>WALLET ADDRESS</div><input type="text" disabled class="profile-input" s:my-prefix-8a91617d-0></div></div></div><div class="password-section" s:my-prefix-8a91617d-0><div class="field-container" s:my-prefix-8a91617d-0><div class="field-label" s:my-prefix-8a91617d-0>CURRENT PASSWORD</div><div class="password-input-container" s:my-prefix-8a91617d-0><input class="profile-input" s:my-prefix-8a91617d-0><button type="button" class="password-toggle" s:my-prefix-8a91617d-0></button></div></div><div class="field-container" s:my-prefix-8a91617d-0><div class="field-label" s:my-prefix-8a91617d-0>NEW PASSWORD</div><div class="password-input-container" s:my-prefix-8a91617d-0><input class="profile-input" s:my-prefix-8a91617d-0><button type="button" class="password-toggle" s:my-prefix-8a91617d-0></button></div></div><div class="field-container" s:my-prefix-8a91617d-0><div class="field-label" s:my-prefix-8a91617d-0>CONFIRM PASSWORD</div><div class="password-input-container" s:my-prefix-8a91617d-0><input class="profile-input" s:my-prefix-8a91617d-0><button type="button" class="password-toggle" s:my-prefix-8a91617d-0></button></div></div></div><div class="button-container" s:my-prefix-8a91617d-0>'),ji=k('<div class="avatar-placeholder" s:my-prefix-8a91617d-0>Click to select avatar'),Ii="my-prefix-8a91617d-0",Ti=".settings-container[s\\:my-prefix-8a91617d-0]{width:100%;max-width:1175px;height:-moz-fit-content;height:fit-content;box-sizing:border-box;padding:30px;margin:0 auto}.profile-main-section[s\\:my-prefix-8a91617d-0]{display:flex;gap:30px;margin-bottom:30px;align-items:flex-end}.avatar-section[s\\:my-prefix-8a91617d-0]{flex:0 0 auto;width:300px;display:flex;flex-direction:column;gap:15px}.profile-fields-section[s\\:my-prefix-8a91617d-0]{flex:1}.section-header[s\\:my-prefix-8a91617d-0]{margin-bottom:20px}.section-header[s\\:my-prefix-8a91617d-0] p[s\\:my-prefix-8a91617d-0]{background:rgba(90,84,153,0.35);height:25px;line-height:25px;padding:0 15px;border-radius:2px;color:#ADA3EF;font-size:12px;font-weight:700;text-transform:uppercase;width:-moz-fit-content;width:fit-content}.field-container[s\\:my-prefix-8a91617d-0]{background:rgba(90,84,153,0.35);padding:0 20px;height:55px;display:flex;align-items:center;justify-content:space-between;margin-bottom:2px}.field-container[s\\:my-prefix-8a91617d-0]:nth-of-type(2n){background:rgba(90,84,153,0.15)}.field-label[s\\:my-prefix-8a91617d-0]{color:#ADA3EF;font-size:14px;font-weight:600;text-transform:uppercase}.profile-input[s\\:my-prefix-8a91617d-0]{background:#2B284E;border:none;border-radius:3px;color:white;padding:8px 12px;width:250px;font-family:inherit}.profile-input[s\\:my-prefix-8a91617d-0]:focus{outline:1px solid #5F5CA6}.hidden[s\\:my-prefix-8a91617d-0]{display:none}.avatar-container[s\\:my-prefix-8a91617d-0]{width:200px;height:200px;border-radius:50%;overflow:hidden;background:#2B284E;display:flex;align-items:center;justify-content:center;transition:opacity 0.2s;margin:0 auto}.avatar-container[s\\:my-prefix-8a91617d-0]:hover{opacity:0.8}.avatar-preview[s\\:my-prefix-8a91617d-0]{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.avatar-placeholder[s\\:my-prefix-8a91617d-0]{color:#ADA3EF;font-size:12px;text-align:center;padding:10px}.password-section[s\\:my-prefix-8a91617d-0]{margin-bottom:20px}.button-container[s\\:my-prefix-8a91617d-0]{display:flex;justify-content:flex-end}.button-container[s\\:my-prefix-8a91617d-0] button[s\\:my-prefix-8a91617d-0]{width:120px;height:35px}.password-input-container[s\\:my-prefix-8a91617d-0]{position:relative;width:250px}.password-toggle[s\\:my-prefix-8a91617d-0]{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;padding:0;display:flex;align-items:center;justify-content:center;color:#ADA3EF;font-size:16px}.password-toggle[s\\:my-prefix-8a91617d-0]:hover{opacity:0.8}.username-input-container[s\\:my-prefix-8a91617d-0]{position:relative;width:250px}.username-check[s\\:my-prefix-8a91617d-0]{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;padding:0;display:flex;align-items:center;justify-content:center;color:#666;font-size:16px;opacity:0.5;transition:all 0.2s ease}.username-check[s\\:my-prefix-8a91617d-0].changed{color:#ADA3EF;opacity:1}.username-check[s\\:my-prefix-8a91617d-0]:disabled{cursor:not-allowed;opacity:0.5}.input-container[s\\:my-prefix-8a91617d-0]{position:relative;width:250px}.check-icon[s\\:my-prefix-8a91617d-0]{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;padding:0;display:flex;align-items:center;justify-content:center;color:#666;font-size:16px;opacity:0.5;transition:all 0.2s ease}.check-icon[s\\:my-prefix-8a91617d-0].changed{color:#ADA3EF;opacity:1}.check-icon[s\\:my-prefix-8a91617d-0]:disabled{cursor:not-allowed;opacity:0.5}.upload-avatar-btn[s\\:my-prefix-8a91617d-0]{width:100%;max-width:200px;height:35px;margin:0 auto}@media only screen and (max-width:1000px){.settings-container[s\\:my-prefix-8a91617d-0]{padding:20px;padding-bottom:90px}.profile-main-section[s\\:my-prefix-8a91617d-0]{flex-direction:column;gap:20px;align-items:center;margin-bottom:20px}.avatar-section[s\\:my-prefix-8a91617d-0]{width:100%;max-width:300px}.avatar-container[s\\:my-prefix-8a91617d-0]{width:150px;height:150px}.profile-fields-section[s\\:my-prefix-8a91617d-0]{width:100%}.field-container[s\\:my-prefix-8a91617d-0]{padding:15px 20px}.profile-input[s\\:my-prefix-8a91617d-0],.password-input-container[s\\:my-prefix-8a91617d-0],.username-input-container[s\\:my-prefix-8a91617d-0],.input-container[s\\:my-prefix-8a91617d-0]{width:200px}}@media only screen and (max-width:600px){.settings-container[s\\:my-prefix-8a91617d-0]{padding:15px;padding-bottom:90px}.profile-main-section[s\\:my-prefix-8a91617d-0]{gap:15px}.field-container[s\\:my-prefix-8a91617d-0]{flex-direction:column;height:auto;padding:12px 15px;gap:8px;align-items:flex-start}.field-label[s\\:my-prefix-8a91617d-0]{font-size:12px}.profile-input[s\\:my-prefix-8a91617d-0],.password-input-container[s\\:my-prefix-8a91617d-0],.username-input-container[s\\:my-prefix-8a91617d-0],.input-container[s\\:my-prefix-8a91617d-0]{width:100%}.avatar-container[s\\:my-prefix-8a91617d-0]{width:120px;height:120px}.upload-avatar-btn[s\\:my-prefix-8a91617d-0]{height:40px;font-size:14px}.button-container[s\\:my-prefix-8a91617d-0]{justify-content:center;margin-top:20px}.button-container[s\\:my-prefix-8a91617d-0] button[s\\:my-prefix-8a91617d-0]{width:100%;max-width:200px;height:40px}.password-section[s\\:my-prefix-8a91617d-0]{margin-top:10px}.password-toggle[s\\:my-prefix-8a91617d-0],.username-check[s\\:my-prefix-8a91617d-0],.check-icon[s\\:my-prefix-8a91617d-0]{width:30px;height:30px}}@media only screen and (max-width:400px){.settings-container[s\\:my-prefix-8a91617d-0]{padding:10px}.avatar-container[s\\:my-prefix-8a91617d-0]{width:100px;height:100px}.field-container[s\\:my-prefix-8a91617d-0]{padding:10px}.profile-input[s\\:my-prefix-8a91617d-0]{font-size:14px;padding:6px 10px}.field-label[s\\:my-prefix-8a91617d-0]{font-size:11px}.upload-avatar-btn[s\\:my-prefix-8a91617d-0]{height:35px;font-size:12px}}";function Wi(){const i=Ci(),[d,{mutateUser:E}]=ki(),[Ee,h]=l(!1),[K,De]=l(d()?.avatar?`http://pvpapi.gotlucky.bet${d()?.avatar}`:"/assets/icons/anon.svg"),[Re,Ue]=l(null),[D,Fe]=l(!1),[R,ze]=l(!1),[U,Ne]=l(!1),[w,F]=l(!1),[b,z]=l(!1),[Q,X]=l(!1),[Z,ee]=l(!1),[n,ie]=l({username:d()?.username||"",email:d()?.email||"",currentPassword:"",newPassword:"",confirmPassword:"",clientSeed:d()?.clientSeed||"",walletAddress:d()?.walletAddress||""}),u=(t,s)=>{t==="username"&&s!==d()?.username?F(!0):t==="username"&&s===d()?.username?F(!1):t==="email"&&s!==d()?.email?z(!0):t==="email"&&s===d()?.email&&z(!1),ie(c=>({...c,[t]:s}))},Oe=async()=>{if(w()){X(!0);try{const t=n(),s=await V("/user/username","POST",JSON.stringify({username:t.username}));console.log(s,"profileRes"),s.success&&(E({...d(),username:n().username}),r("success","Username updated successfully"),F(!1))}catch{r("error","Failed to update username")}finally{X(!1)}}},je=async()=>{if(b()){ee(!0);try{const t=await V("/user/email","POST",JSON.stringify({email:n().email}));t.success?(E({...d(),email:n().email}),r("success","Email updated successfully"),z(!1)):r("error",t.error)}catch(t){console.log(t,"error"),r("error",t)}finally{ee(!1)}}},Ie=()=>{Re()?.click()},Te=async t=>{const s=t.target.files[0];if(s&&s.type.startsWith("image/")){h(!0);try{const c=new FormData;c.append("avatar",s);const v=await fetch("http://pvpapi.gotlucky.bet/user/avatar",{method:"POST",headers:{Authorization:Fi()},body:c}).then(p=>p.json());if(v.success){const p=`http://pvpapi.gotlucky.bet${v.avatar}`;De(p),E({...d(),avatar:v.avatar}),r("success","Avatar updated successfully")}else r("error",v.error||"Failed to update avatar")}catch(c){console.error("Error uploading avatar:",c),r("error","Failed to upload avatar")}finally{h(!1)}}else r("error","Please select a valid image file")},Le=async()=>{if(!n().currentPassword||!n().newPassword||!n().confirmPassword){r("error","Please fill in all password fields");return}if(n().newPassword!==n().confirmPassword){r("error","New passwords do not match");return}h(!0);try{const t=await V("/user/password","POST",JSON.stringify({currentPassword:n().currentPassword,newPassword:n().newPassword}));t.success?(r("success","Password updated successfully"),ie(s=>({...s,currentPassword:"",newPassword:"",confirmPassword:""}))):r("error",t.error)}catch{r("error","Failed to update password")}finally{h(!1)}};return Ei(Ii,1,Ti),(()=>{const t=Oi(),s=t.firstChild,c=s.firstChild,v=c.firstChild,p=v.nextSibling,ae=p.nextSibling,te=c.nextSibling,N=te.firstChild,We=N.firstChild,O=N.nextSibling,ne=O.firstChild,se=ne.nextSibling,S=se.firstChild,m=S.nextSibling,j=O.nextSibling,re=j.firstChild,de=re.nextSibling,P=de.firstChild,$=P.nextSibling,I=j.nextSibling,oe=I.firstChild,T=oe.nextSibling,le=I.nextSibling,fe=le.firstChild,L=fe.nextSibling,W=s.nextSibling,M=W.firstChild,ce=M.firstChild,ve=ce.nextSibling,y=ve.firstChild,J=y.nextSibling,G=M.nextSibling,pe=G.firstChild,ue=pe.nextSibling,g=ue.firstChild,Y=g.nextSibling,xe=G.nextSibling,me=xe.firstChild,$e=me.nextSibling,_=$e.firstChild,B=_.nextSibling,ye=W.nextSibling;return x(v,H(Ae,{get when(){return K()},get fallback(){return(()=>{const e=ji();return f(o=>a(e,i(),o)),e})()},get children(){const e=zi();return f(o=>{const A=K(),q=i();return A!==o._v$&&C(e,"src",o._v$=A),o._v$2=a(e,q,o._v$2),o},{_v$:void 0,_v$2:void 0}),e}})),Di(Ue,p),p.addEventListener("change",Te),ae.$$click=Ie,S.$$input=e=>u("username",e.target.value),m.$$click=Oe,x(m,(()=>{const e=Ce(()=>!!Q());return()=>e()?"⌛":(w(),"✓")})()),P.$$input=e=>u("email",e.target.value),$.$$click=je,x($,(()=>{const e=Ce(()=>!!Z());return()=>e()?"⌛":(b(),"✓")})()),T.$$input=e=>u("clientSeed",e.target.value),L.$$input=e=>u("walletAddress",e.target.value),y.$$input=e=>u("currentPassword",e.target.value),J.$$click=()=>Fe(!D()),x(J,()=>D()?"🔒":"👁️"),g.$$input=e=>u("newPassword",e.target.value),Y.$$click=()=>ze(!R()),x(Y,()=>R()?"🔒":"👁️"),_.$$input=e=>u("confirmPassword",e.target.value),B.$$click=()=>Ne(!U()),x(B,()=>U()?"🔒":"👁️"),x(ye,H(Ae,{get when(){return!Ee()},get fallback(){return H(Ri,{type:"small"})},get children(){const e=Ni();return e.$$click=Le,f(o=>a(e,i(),o)),e}})),f(e=>{const o=i(),A=i(),q=i(),Me=i(),Je=i(),Ge=i(),Ye=i(),Be=i(),qe=i(),He=i(),Ve=i(),Ke=i(),Qe=i(),ge=`username-check ${w()?"changed":""}`,_e=!w()||Q(),Xe=i(),Ze=i(),ei=i(),ii=i(),ai=i(),he=`check-icon ${b()?"changed":""}`,we=!b()||Z(),ti=i(),ni=i(),si=i(),ri=i(),di=i(),oi=i(),li=i(),fi=i(),ci=i(),vi=i(),pi=i(),be=D()?"text":"password",ui=i(),xi=i(),mi=i(),$i=i(),yi=i(),Se=R()?"text":"password",gi=i(),_i=i(),hi=i(),wi=i(),bi=i(),Pe=U()?"text":"password",Si=i(),Pi=i(),Ai=i();return e._v$3=a(t,o,e._v$3),e._v$4=a(s,A,e._v$4),e._v$5=a(c,q,e._v$5),e._v$6=a(v,Me,e._v$6),e._v$7=a(p,Je,e._v$7),e._v$8=a(ae,Ge,e._v$8),e._v$9=a(te,Ye,e._v$9),e._v$10=a(N,Be,e._v$10),e._v$11=a(We,qe,e._v$11),e._v$12=a(O,He,e._v$12),e._v$13=a(ne,Ve,e._v$13),e._v$14=a(se,Ke,e._v$14),e._v$15=a(S,Qe,e._v$15),ge!==e._v$16&&ke(m,e._v$16=ge),_e!==e._v$17&&(m.disabled=e._v$17=_e),e._v$18=a(m,Xe,e._v$18),e._v$19=a(j,Ze,e._v$19),e._v$20=a(re,ei,e._v$20),e._v$21=a(de,ii,e._v$21),e._v$22=a(P,ai,e._v$22),he!==e._v$23&&ke($,e._v$23=he),we!==e._v$24&&($.disabled=e._v$24=we),e._v$25=a($,ti,e._v$25),e._v$26=a(I,ni,e._v$26),e._v$27=a(oe,si,e._v$27),e._v$28=a(T,ri,e._v$28),e._v$29=a(le,di,e._v$29),e._v$30=a(fe,oi,e._v$30),e._v$31=a(L,li,e._v$31),e._v$32=a(W,fi,e._v$32),e._v$33=a(M,ci,e._v$33),e._v$34=a(ce,vi,e._v$34),e._v$35=a(ve,pi,e._v$35),be!==e._v$36&&C(y,"type",e._v$36=be),e._v$37=a(y,ui,e._v$37),e._v$38=a(J,xi,e._v$38),e._v$39=a(G,mi,e._v$39),e._v$40=a(pe,$i,e._v$40),e._v$41=a(ue,yi,e._v$41),Se!==e._v$42&&C(g,"type",e._v$42=Se),e._v$43=a(g,gi,e._v$43),e._v$44=a(Y,_i,e._v$44),e._v$45=a(xe,hi,e._v$45),e._v$46=a(me,wi,e._v$46),e._v$47=a($e,bi,e._v$47),Pe!==e._v$48&&C(_,"type",e._v$48=Pe),e._v$49=a(_,Si,e._v$49),e._v$50=a(B,Pi,e._v$50),e._v$51=a(ye,Ai,e._v$51),e},{_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0,_v$12:void 0,_v$13:void 0,_v$14:void 0,_v$15:void 0,_v$16:void 0,_v$17:void 0,_v$18:void 0,_v$19:void 0,_v$20:void 0,_v$21:void 0,_v$22:void 0,_v$23:void 0,_v$24:void 0,_v$25:void 0,_v$26:void 0,_v$27:void 0,_v$28:void 0,_v$29:void 0,_v$30:void 0,_v$31:void 0,_v$32:void 0,_v$33:void 0,_v$34:void 0,_v$35:void 0,_v$36:void 0,_v$37:void 0,_v$38:void 0,_v$39:void 0,_v$40:void 0,_v$41:void 0,_v$42:void 0,_v$43:void 0,_v$44:void 0,_v$45:void 0,_v$46:void 0,_v$47:void 0,_v$48:void 0,_v$49:void 0,_v$50:void 0,_v$51:void 0}),f(()=>S.value=n().username),f(()=>P.value=n().email),f(()=>T.value=n().clientSeed||""),f(()=>L.value=n().walletAddress||""),f(()=>y.value=n().currentPassword),f(()=>g.value=n().newPassword),f(()=>_.value=n().confirmPassword),t})()}Ui(["click","input"]);export{Wi as default};
